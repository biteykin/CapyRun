# landing.py
import streamlit as st
from utils import open_sidebar

def _switch_and_focus(mode: str, toast_icon: str):
    st.session_state["auth_mode"] = mode if mode in ("login", "signup") else "login"
    st.session_state["_just_switched_auth"] = True
    open_sidebar()
    st.toast("ะคะพัะผะฐ ะฒัะพะดะฐ ะธ ัะตะณะธัััะฐัะธะธ โ ะฒ ัะฐะนะดะฑะฐัะต ัะปะตะฒะฐ ๐", icon=toast_icon)
    st.rerun()

def render_landing() -> None:
    st.markdown(
        """# CapyRun โ AI-ััะตะฝะตั ะดะปั ะฑะตะณะฐ ะธ ัะธัะฝะตัะฐ ๐ง๐โโ๏ธ
ะััะปะตะถะธะฒะฐะน ััะตะฝะธัะพะฒะบะธ, ัะผะพััะธ ะฟะพะฝััะฝัะต ะณัะฐัะธะบะธ ะธ ะฟะพะปััะฐะน ะฟะตััะพะฝะฐะปัะฝัะต ัะพะฒะตัั, ะบะฐะบ ััะฐัั ะฑััััะตะต ะธ ะฒัะฝะพัะปะธะฒะตะต.

### ะงัะพ ัะผะตะตั CapyRun
- ๐ ะัะฐัะธะบะธ ัะตะผะฟะฐ, ะฟัะปััะฐ ะธ ะทะพะฝ โ ะฑะตะท ะฒะพะดั, ัะพะปัะบะพ ัััั.
- ๐งญ ะะตััะพะฝะฐะปัะฝัะต ัะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ัะฒะพะธะผ ะดะฐะฝะฝัะผ โ ััะพ ัะปัััะธัั ัะถะต ะฝะฐ ัะปะตะดัััะตะผ ะทะฐะฑะตะณะต.
- โค๏ธ ะะพะฝั ะงะกะก: ะฐะฒัะพัะฐัััั ะธ ัะฐะทะฑะพั, ะณะดะต ัั ยซะถัะณยป, ะฐ ะณะดะต ยซัะฐะฑะพัะฐะป ะฑะฐะทัยป.
- ๐ฏ ะฆะตะปะธ ะธ ะฟัะพะณัะตัั: ะฒะธะดะฝะพ ัะพัั ะธ ัะทะบะธะต ะผะตััะฐ.
- โ๏ธ ะะผะฟะพัั `.fit`: ะทะฐะณััะทะธ โ ะธ ะฟะพะปััะธ ะฐะฝะฐะปะธัะธะบั ะทะฐ ะผะธะฝััั.
- ๐ ะัะธะฒะฐัะฝะพััั: ะฐะฒัะพัะธะทะฐัะธั ะธ ััะฐะฝะตะฝะธะต ะฝะฐ Supabase.
"""
    )

    col1, col2 = st.columns(2)
    if col1.button("๐ ะะพะนัะธ", use_container_width=True, key="btn_landing_login"):
        _switch_and_focus("login", "๐")
    if col2.button("โจ ะะฐัะตะณะธัััะธัะพะฒะฐัััั", use_container_width=True, key="btn_landing_signup"):
        _switch_and_focus("signup", "โจ")

    st.caption("ะคะพัะผะฐ ะฒัะพะดะฐ ะธ ัะตะณะธัััะฐัะธะธ โ ะฒ ัะฐะนะดะฑะฐัะต ัะปะตะฒะฐ ๐")
